<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Error 404 - mimistok</title><meta name="robots" content="noindex, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="alternate" type="application/atom+xml" href="https://mimistok.com/feed.xml" title="mimistok - RSS"><link rel="alternate" type="application/json" href="https://mimistok.com/feed.json" title="mimistok - JSON"><meta property="og:title" content="mimistok"><meta property="og:image" content="https://mimistok.com/media/website/mimistoklogo.svg"><meta property="og:image:width" content="50"><meta property="og:image:height" content="50"><meta property="og:site_name" content="mimistok"><meta property="og:description" content=""><meta property="og:url" content="https://mimistok.com/"><meta property="og:type" content="website"><link rel="shortcut icon" href="https://mimistok.com/media/website/mimi-2.svg" type="image/x-icon"><link rel="stylesheet" href="https://mimistok.com/assets/css/style.css?v=512d60eb8c44102eb1551c199954f68c"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"mimistok","logo":"https://mimistok.com/media/website/mimistoklogo.svg","url":"https://mimistok.com/"}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Boutique Mimistok – produits tech et accessoires."><meta name="content-signal" content="search=yes,ai-train=no"><title>Mimistok</title></head><style>.fi{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}*{vector-effect: non-scaling-stroke; }</style></head><body class="error-template"><div id="panier-flottant"><div class="infos"><span class="quantite">0</span> <span class="total">€0.00</span></div><button class="btn-payer-flottant">Payer</button></div><style>/* --- Panier flottant --- */
#panier-flottant {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 20px);
  max-width: 600px;
  background: rgba(30, 30, 30, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.4);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 10px;
  font-family: sans-serif;
  font-size: 16px; /* 16px pour éviter le zoom sur iOS */
  color: #fff;
  z-index: 2147483647;
  touch-action: manipulation; /* empêche double-tap zoom */
}

/* Infos quantité / total */
#panier-flottant .infos {
  flex: 1 1 auto;
  font-weight: 500;
  margin-right: 15px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-left: 18px;
  padding-right: 8px;
}

/* Bouton payer */
#panier-flottant .btn-payer-flottant {
  background: #007BFF;
  color: #fff;
  border: none;
  padding: 12px 32px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: bold;
  font-size: 16px; /* 16px pour iOS */
  text-align: center;
  transition: transform 0.2s, background 0.3s;
  flex-shrink: 0;
  margin-right: 8px;
  touch-action: manipulation; /* empêche double-tap zoom */
}

#panier-flottant .btn-payer-flottant:hover {
  background: #0056d2;
  transform: scale(1.05);
}

/* Petit espace supplémentaire pour mobile */
@media (max-width: 480px) {
  #panier-flottant {
    width: calc(100% - 20px);
    padding: 14px 10px;
  }
}

/* Empêche zoom sur tous les boutons / inputs globaux */
button, input, select, textarea {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-touch-action: manipulation;
  touch-action: manipulation;
}</style><script>// --- Fonctions panier flottant ---
function jouerSonAjout() {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.type = 'triangle';      
    osc.frequency.value = 1200; 
    gain.gain.setValueAtTime(0.08, ctx.currentTime); 
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.12);

    osc.start();
    osc.stop(ctx.currentTime + 0.12);
}

function ajouterProduitAuPanier(priceId, nom, prix, quantite) {
    console.log('Ajout au panier:', { priceId, nom, prix, quantite });
    jouerSonAjout();

    let panier = JSON.parse(localStorage.getItem('panier')) || [];
    const produitExistant = panier.find(item => item.priceId === priceId);

    if (produitExistant) {
        produitExistant.quantite += quantite;
    } else {
        panier.push({ priceId, nom, prix, quantite });
    }

    localStorage.setItem('panier', JSON.stringify(panier));
    mettreAJourPanierFlottant();
}

function mettreAJourPanierFlottant() {
    const panier = JSON.parse(localStorage.getItem('panier')) || [];
    const totalItems = panier.reduce((t, i) => t + i.quantite, 0);
    const totalPrix = panier.reduce((t, i) => t + (i.prix * i.quantite), 0);

    const flottant = document.getElementById('panier-flottant');
    const quantiteElem = document.querySelector('#panier-flottant .quantite');
    const totalElem = document.querySelector('#panier-flottant .total');
    const btnElem = document.querySelector('#panier-flottant .btn-payer-flottant');

    if (quantiteElem && totalElem) {
        quantiteElem.textContent = `${totalItems} ${totalItems > 1 ? 'articles' : 'article'} – `;
        totalElem.textContent = `€${totalPrix.toFixed(2)}`;
    }

    if (flottant) flottant.classList.add('visible');

    if (btnElem) btnElem.textContent = 'Mon Panier';
}

// --- Initialisation ---
document.addEventListener('DOMContentLoaded', function() {
    mettreAJourPanierFlottant();

    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('btn-payer-flottant')) {
            window.location.href = '/panier';
        }
    });
});</script><script>function fixImages() {
    if (window.innerWidth >= 1024) {
      document.querySelectorAll('.content__featured-image--attop img.is-loaded').forEach(img => {
        img.removeAttribute('srcset'); // Supprime le srcset pour éviter le flou progressif
        img.style.imageRendering = ''; // Réinitialise toute manipulation CSS de rendu
      });
    }
  }
  window.addEventListener('load', fixImages);
  window.addEventListener('resize', fixImages);</script><script>// Cacher le panier flottant sur la page panier
if (window.location.pathname.includes('/panier/') || 
    window.location.href.includes('/panier/') ||
    document.body.classList.contains('page-panier')) {
    
    const panierFlottant = document.getElementById('panier-flottant');
    if (panierFlottant) {
        panierFlottant.style.display = 'none';
    }
}</script><div class="container container--nosidebar"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://mimistok.com/"><img src="https://mimistok.com/media/website/mimistoklogo.svg" alt="mimistok" width="50" height="50"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a class="tltp" href="https://mimistok.com/" target="_self" aria-label="Accueil"><svg class="fi fi-home" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#home"/></svg> <span>Accueil</span></a></li><li><a class="tltp" href="https://mimistok.com/panier/" target="_self" aria-label="Votre panier"><svg class="fi fi-shopping-cart" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#shopping-cart"/></svg> <span>Votre panier</span></a></li><li><a class="tltp" href="https://mimistok.com/contactez-nous/" target="_self" aria-label="Contact"><svg class="fi fi-mail" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#mail"/></svg> <span>Contact</span></a></li><li><a class="tltp" href="https://mimistok.com/notre-concept/" target="_self" aria-label="Le concept"><svg class="fi fi-coffee" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#coffee"/></svg> <span>Le concept</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://mimistok.com/"><img src="https://mimistok.com/media/website/mimistoklogo.svg" alt="mimistok" width="50" height="50"></a></header></div></div><main class="main page page--error"><div class="hero"><div class="main__inner"><h1>Explore, be curious.</h1><p>Discover stories, thinking, and expertise from writers on any topic.</p></div></div><div class="main__inner"><h1>404 Error</h1><p>The page you were looking for appears to have been moved, deleted or does not exist. You could go back to where you were or head straight to our home page.</p><p><a href="https://mimistok.com/" class="btn">Go Home</a></p></div></main></div><script defer="defer" src="https://mimistok.com/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><style>#popup {
    position: fixed;
    inset: 0;
    background: rgba(22, 23, 24, 0.95);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: flex-start;
    z-index: 99999;
    opacity: 0;
    transition: opacity 0.4s ease;
    padding-top: 80px; /* Augmenté pour descendre la barre */
  }
  #popup.show {
    display: flex;
    opacity: 1;
  }
  body.no-scroll {
    overflow: hidden;
  }

  #search-container-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    padding: 0 20px;
    box-sizing: border-box;
  }

  #search-input-popup {
    padding: 13px 25px;
    width: 100%;
    max-width: 690px;
    border-radius: 30px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    font-size: 18px;
    background: rgba(30, 30, 30, 0.9);
    color: #FFFFFF;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    margin-bottom: 15px;
    box-sizing: border-box;
    /* Empêcher le zoom sur mobile */
    font-size: 16px; /* Taille minimum pour éviter le zoom */
    transform: scale(1); /* Forcer l'échelle */
  }

  #search-input-popup::placeholder {
    color: rgba(255, 255, 255, 0.6);
    font-size: 18px;
  }

  #search-input-popup:focus {
    outline: none;
    border-color: #2196F3;
    box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.4), 0 6px 20px rgba(0, 0, 0, 0.4);
    transform: scale(1.02);
  }

  #search-results-container-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 690px;
  }

  .result-item-popup {
    display: flex;
    align-items: center;
    width: 100%;
    margin: 10px 0;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    cursor: pointer;
    background: rgba(50, 50, 50, 0.8);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    box-sizing: border-box;
  }

  .result-item-popup:hover {
    background: rgba(70, 70, 70, 0.9);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }

  .result-img-popup {
    width: 55px;
    height: 55px;
    object-fit: cover;
    border-radius: 10px;
    margin-right: 18px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .result-title-popup {
    font-size: 18px;
    color: #FFFFFF;
    font-weight: 500;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-in-popup {
    animation: fadeIn 0.3s ease forwards;
  }

  /* Bouton fermer */
  #popup-close {
    position: fixed;
    top: 25px; /* Légèrement descendu */
    right: 20px;
    width: 45px;
    height: 45px;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    z-index: 100000;
  }

  /* RESPONSIVE MOBILE */
  @media (max-width: 768px) {
    #popup {
      padding-top: 100px; /* Beaucoup plus bas sur mobile */
      align-items: flex-start;
    }
    
    #search-container-popup {
      padding: 0 15px;
    }
    
    #search-input-popup {
      padding: 15px 20px;
      font-size: 16px; /* Taille fixe pour éviter le zoom */
      max-width: 100%;
      border-radius: 25px;
      /* Espace sur les côtés */
      margin-left: 10px;
      margin-right: 10px;
    }
    
    #search-input-popup::placeholder {
      font-size: 16px;
    }
    
    #search-results-container-popup {
      max-width: 100%;
      padding: 0 10px; /* Espace sur les côtés pour les résultats */
      box-sizing: border-box;
    }
    
    .result-item-popup {
      padding: 12px;
      margin: 8px 0;
      width: calc(100% - 20px); /* Espace sur les côtés */
    }
    
    .result-img-popup {
      width: 45px;
      height: 45px;
      margin-right: 15px;
    }
    
    .result-title-popup {
      font-size: 16px;
    }
    
    #popup-close {
      top: 20px; /* Descendu sur mobile */
      right: 15px;
      width: 40px;
      height: 40px;
    }
  }

  @media (max-width: 480px) {
    #popup {
      padding-top: 90px; /* Encore plus bas sur très petits écrans */
    }
    
    #search-container-popup {
      padding: 0 10px;
    }
    
    #search-input-popup {
      padding: 14px 18px; /* Légèrement plus de padding */
      font-size: 16px; /* Toujours 16px pour éviter le zoom */
      margin-left: 5px;
      margin-right: 5px;
    }
    
    #search-input-popup::placeholder {
      font-size: 16px;
    }
    
    .result-item-popup {
      padding: 12px;
      width: calc(100% - 10px); /* Moins d'espace sur très petits écrans */
    }
    
    .result-img-popup {
      width: 40px;
      height: 40px;
      margin-right: 12px;
    }
    
    .result-title-popup {
      font-size: 15px;
    }
    
    #popup-close {
      top: 15px;
      right: 10px;
      width: 35px;
      height: 35px;
    }
  }

  /* Empêcher le zoom sur l'input sur mobile */
  @media screen and (max-width: 768px) {
    #search-input-popup {
      font-size: 16px !important;
      transform: scale(1) !important;
    }
    
    /* Viewport pour éviter le zoom */
    @viewport {
      width: device-width;
      zoom: 1.0;
      min-zoom: 1.0;
      max-zoom: 1.0;
      user-zoom: fixed;
    }
  }</style><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div id="popup" aria-hidden="true" role="dialog" aria-modal="true"><button id="popup-close" title="Fermer" aria-label="Fermer"><svg width="100%" height="100%" viewBox="0 0 40 40" fill="none"><circle cx="20" cy="20" r="20" fill="rgba(255,255,255,0.1)"/><path d="M25 15L15 25M15 15L25 25" stroke="white" stroke-width="2" stroke-linecap="round"/></svg></button><div id="search-container-popup"><input id="search-input-popup" type="text" placeholder="Tapez un mot-clé..."><div id="search-results-container-popup"></div></div></div><script>// LOGIQUE DU POPUP
const popup = document.getElementById('popup');
const popupCloseBtn = document.getElementById('popup-close');
const openSearchBtn = document.getElementById('open-search-btn');

function showPopup() {
  popup.style.display = 'flex';
  setTimeout(() => {
    popup.classList.add('show');
    popup.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');
    
    // Focus sur la barre de recherche
    setTimeout(() => {
      const searchInput = document.getElementById('search-input-popup');
      searchInput.focus();
      
      // Empêcher le zoom sur mobile
      if (window.innerWidth <= 768) {
        searchInput.style.fontSize = '16px';
        searchInput.style.transform = 'scale(1)';
      }
    }, 300);
  }, 10);
}

function hidePopup() {
  popup.classList.remove('show');
  popup.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('no-scroll');
  
  popup.addEventListener('transitionend', function handler() {
    if (!popup.classList.contains('show')) {
      popup.style.display = 'none';
    }
    popup.removeEventListener('transitionend', handler);
  });
}

// Événements
if (openSearchBtn) {
  openSearchBtn.addEventListener('click', showPopup);
}
popupCloseBtn.addEventListener('click', hidePopup);

// Fermer avec Échap
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape' && popup.classList.contains('show')) {
    hidePopup();
  }
});

// Fermer en cliquant en dehors
popup.addEventListener('click', function(e) {
  if (e.target === popup) {
    hidePopup();
  }
});

// TON SYSTÈME DE RECHERCHE EXISTANT (adapté pour le popup)
let pagesIndex = [];

// Utilise ton fichier JSON existant
fetch('/searcho.json')
  .then(response => response.json())
  .then(data => {
    pagesIndex = data;
  });

const inputPopup = document.getElementById('search-input-popup');
const resultsContainerPopup = document.getElementById('search-results-container-popup');

inputPopup.addEventListener('input', function() {
  const query = inputPopup.value.trim().toLowerCase();
  resultsContainerPopup.innerHTML = '';
  
  if (!query) return;

  const matches = pagesIndex.filter(p => p.title.toLowerCase().includes(query));

  matches.forEach((p, index) => {
    const resultDiv = document.createElement('div');
    resultDiv.className = 'result-item-popup fade-in-popup';
    resultDiv.style.animationDelay = `${index * 0.05}s`;

    const img = document.createElement('img');
    img.src = p.image || '';
    img.className = 'result-img-popup';
    img.alt = p.title;
    
    const title = document.createElement('span');
    title.textContent = p.title;
    title.className = 'result-title-popup';

    resultDiv.appendChild(img);
    resultDiv.appendChild(title);

    resultDiv.addEventListener('click', function() {
      window.location.href = p.url;
    });

    resultsContainerPopup.appendChild(resultDiv);
  });
});

// Entrée = aller sur le premier résultat
inputPopup.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    const firstResult = resultsContainerPopup.querySelector('.result-item-popup');
    if (firstResult) {
      firstResult.click();
    }
  }
});

// Empêcher le zoom sur l'input
inputPopup.addEventListener('touchstart', function(e) {
  if (window.innerWidth <= 768) {
    this.style.fontSize = '16px';
  }
});

inputPopup.addEventListener('focus', function(e) {
  if (window.innerWidth <= 768) {
    this.style.fontSize = '16px';
  }
});</script><script>document.addEventListener('DOMContentLoaded', function() {
  const menuItem = document.querySelector('.open-search-btn');
  if (menuItem) {
    menuItem.style.cursor = 'pointer';
    menuItem.addEventListener('click', showPopup);
  }
});</script><style>#popup-avis {
    position: fixed;
    inset: 0;
    background: rgba(22, 23, 24, 0.95);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 99999;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  
  #popup-avis.show {
    display: flex;
    opacity: 1;
  }
  
  body.no-scroll {
    overflow: hidden;
  }

  .form-container-popup {
    background: transparent;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
  }

  .close-bottom-btn {
    display: block;
    margin: 50px auto 20px auto;
    padding: 12px 30px;
    background: white;
    color: #333;
    border: 2px solid #ddd;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    width: auto;
    min-width: 120px;
  }

  /* MODIFICATIONS : Champs avec fond gris foncé transparent et texte blanc */
  .form-input {
    font-size: 16px;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    margin-bottom: 15px;
    background: rgba(60, 60, 60, 0.7) !important;
    color: white !important;
  }

  .form-input:invalid {
    border-color: #ff4444;
  }

  .form-input::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .form-textarea {
    font-size: 16px;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    margin-bottom: 15px;
    min-height: 100px;
    resize: vertical;
    font-family: inherit;
    background: rgba(60, 60, 60, 0.7) !important;
    color: white !important;
  }

  .form-textarea:invalid {
    border-color: #ff4444;
  }

  .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .error-message {
    color: #ff4444;
    font-size: 14px;
    margin-top: -10px;
    margin-bottom: 15px;
    display: none;
  }

  /* CARROUSEL IMAGES PROFIL - AUGMENTÉ DE 20% */
  .avatar-carousel {
    display: flex;
    gap: 15px;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 20px 10px;
    margin-bottom: 20px;
    scrollbar-width: thin;
  }

  .avatar-option {
    width: 72px; /* 60px + 20% */
    height: 72px; /* 60px + 20% */
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 3px solid transparent;
    flex-shrink: 0;
  }

  .avatar-option.selected {
    border: 3px solid #4217f4;
    transform: scale(1.1);
  }

  .avatar-option img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }

  @media (max-width: 768px) {
    .form-container-popup {
      width: 95%;
    }
    
    .avatar-carousel {
      gap: 10px;
      padding: 15px 5px;
    }
    
    .avatar-option {
      width: 60px; /* 50px + 20% */
      height: 60px; /* 50px + 20% */
    }
  }</style><div id="popup-avis" aria-hidden="true" role="dialog" aria-modal="true"><div class="form-container-popup"><div style="text-align: center; margin-bottom: 20px;"><img src="https://image.mimistok.com/smile.svg" alt="Notation" width="100" height="100"></div><div style="max-width: 400px; margin: 0 auto; text-align: center;"><div id="successMessageTop" style="display: none; background-color: #d4edda; color: #155724; font-weight: 500; border-radius: 999px; padding: 10px 18px; margin-bottom: 20px; font-size: 14px; max-width: 300px; margin-left: auto; margin-right: auto;">Votre avis a été envoyé</div><form id="contactForm" action="https://api.web3forms.com/submit" method="POST"><input name="access_key" type="hidden" value="7fee4d4b-e46f-49f8-9858-4d07d0732e87"> <input id="selectedAvatar" name="avatar" type="hidden" value="https://image.mimistok.com/women1.svg"><div id="step-1" class="form-step"><div style="font-size: 16px; margin-bottom: 15px; color: white; font-weight: 500;">Sélectionnez votre image de profil</div><div class="avatar-carousel" id="avatarCarousel"></div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="2">Étape suivante</button></div><div id="step-2" class="form-step" style="display: none;"><input class="form-input" name="nom" required type="text" placeholder="Votre nom ou pseudo *"><div class="error-message" id="nom-error">Veuillez saisir votre nom ou pseudo</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="3">Étape suivante</button></div><div id="step-3" class="form-step" style="display: none;"><div id="starSelector" style="display: block; margin-bottom: 20px;"><div style="font-size: 16px; margin-bottom: 15px; color: white; font-weight: 500;">Sélectionnez votre note *</div><div id="starsContainer" style="display: flex; justify-content: center; gap: 12px; margin-bottom: 15px;"><div class="star-option" style="width: 50px; height: 50px; background: #d35400; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="1">1</div><div class="star-option" style="width: 50px; height: 50px; background: #e74c3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="2">2</div><div class="star-option" style="width: 50px; height: 50px; background: #2c3e50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="3">3</div><div class="star-option" style="width: 50px; height: 50px; background: #8e44ad; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="4">4</div><div class="star-option" style="width: 50px; height: 50px; background: #f39c12; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid #4217f4; transform: scale(1.1);" data-value="5">5</div></div></div><input id="selectedStars" name="nombre_etoiles" required type="hidden" value="5"><div id="selectedStarsDisplay" style="display: block; margin-bottom: 15px;"><div style="font-size: 14px; color: white; margin-bottom: 5px;">Note sélectionnée :</div><div id="starsPreview" style="font-size: 18px; font-weight: bold; color: #4217f4;">5/5</div></div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="4">Étape suivante</button></div><div id="step-4" class="form-step" style="display: none;"><textarea class="form-textarea" name="commentaire" required placeholder="Votre commentaire *"></textarea><div class="error-message" id="commentaire-error">Veuillez saisir votre commentaire</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="5">Étape suivante</button></div><div id="step-5" class="form-step" style="display: none;"><input class="form-input" name="email" required type="email" placeholder="Votre email *"><div class="error-message" id="email-error">Veuillez saisir un email valide</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="6">Étape suivante</button></div><div id="step-6" class="form-step" style="display: none;"><label id="captcha-label" style="font-size: 15px; font-weight: bold; color: white; display: block; margin-bottom: 10px;"></label> <input class="form-input" id="captcha-input" name="captcha" required type="text" placeholder="Réponse *" style="width: 50%; margin: 0 auto 15px auto; text-align: center; display: block;"><div class="error-message" id="captcha-error">Veuillez saisir la réponse correcte</div><button style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="submit">Envoyer</button></div><div id="successMessageBottom" style="display: none; background-color: #d4edda; color: #155724; font-weight: 500; border-radius: 999px; padding: 10px 18px; font-size: 14px; max-width: 300px; margin: 10px auto 0 auto;">Vérification en cours</div></form></div><button class="close-bottom-btn" onclick="hideAvisPopup()">Fermer</button></div></div><script>// GESTION DU POPUP
const popupAvis = document.getElementById('popup-avis');

function showAvisPopup() {
  popupAvis.style.display = 'flex';
  setTimeout(() => {
    popupAvis.classList.add('show');
    popupAvis.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');
    
    // RÉINITIALISER le formulaire à l'étape 1
    document.querySelectorAll('.form-step').forEach(step => {
      step.style.display = 'none';
    });
    document.getElementById('step-1').style.display = 'block';
    
    // Cacher tous les messages d'erreur
    document.querySelectorAll('.error-message').forEach(error => {
      error.style.display = 'none';
    });
    
  }, 10);
}

function hideAvisPopup() {
  popupAvis.classList.remove('show');
  popupAvis.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('no-scroll');
  
  popupAvis.addEventListener('transitionend', function handler() {
    if (!popupAvis.classList.contains('show')) {
      popupAvis.style.display = 'none';
    }
    popupAvis.removeEventListener('transitionend', handler);
  });
}

// GÉNÉRATION DU CARROUSEL D'AVATARS
function generateAvatarCarousel() {
  const carousel = document.getElementById('avatarCarousel');
  const selectedAvatarInput = document.getElementById('selectedAvatar');
  
  // Générer les 60 images (30 women + 30 men)
  for (let i = 1; i <= 30; i++) {
    // Images women
    const womenDiv = document.createElement('div');
    womenDiv.className = 'avatar-option' + (i === 1 ? ' selected' : '');
    womenDiv.innerHTML = `<img src="https://image.mimistok.com/women${i}.svg" alt="Profil femme ${i}">`;
    womenDiv.addEventListener('click', function() {
      // Désélectionner toutes les images
      document.querySelectorAll('.avatar-option').forEach(avatar => {
        avatar.classList.remove('selected');
      });
      // Sélectionner cette image
      this.classList.add('selected');
      selectedAvatarInput.value = `https://image.mimistok.com/women${i}.svg`;
    });
    carousel.appendChild(womenDiv);
    
    // Images men
    const menDiv = document.createElement('div');
    menDiv.className = 'avatar-option';
    menDiv.innerHTML = `<img src="https://image.mimistok.com/men${i}.svg" alt="Profil homme ${i}">`;
    menDiv.addEventListener('click', function() {
      // Désélectionner toutes les images
      document.querySelectorAll('.avatar-option').forEach(avatar => {
        avatar.classList.remove('selected');
      });
      // Sélectionner cette image
      this.classList.add('selected');
      selectedAvatarInput.value = `https://image.mimistok.com/men${i}.svg`;
    });
    carousel.appendChild(menDiv);
  }
}

// FONCTION DE VALIDATION
function validateStep(stepId) {
  let isValid = true;
  
  switch(stepId) {
    case '2':
      const nomInput = document.querySelector('#step-2 .form-input');
      const nomError = document.getElementById('nom-error');
      if (!nomInput.value.trim()) {
        nomError.style.display = 'block';
        isValid = false;
      } else {
        nomError.style.display = 'none';
      }
      break;
      
    case '4':
      const commentaireInput = document.querySelector('#step-4 .form-textarea');
      const commentaireError = document.getElementById('commentaire-error');
      if (!commentaireInput.value.trim()) {
        commentaireError.style.display = 'block';
        isValid = false;
      } else {
        commentaireError.style.display = 'none';
      }
      break;
      
    case '5':
      const emailInput = document.querySelector('#step-5 .form-input');
      const emailError = document.getElementById('email-error');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailInput.value.trim() || !emailRegex.test(emailInput.value)) {
        emailError.style.display = 'block';
        isValid = false;
      } else {
        emailError.style.display = 'none';
      }
      break;
  }
  
  return isValid;
}

// LOGIQUE FORMULAIRE
let selectedStarValue = 5;

document.addEventListener('DOMContentLoaded', function() {
  // Générer le carrousel d'avatars
  generateAvatarCarousel();
  
  // Gestion des étoiles
  const starOptions = document.querySelectorAll('.star-option');
  const selectedStarsInput = document.getElementById('selectedStars');
  const starsPreview = document.getElementById('starsPreview');

  starOptions.forEach(star => {
    star.addEventListener('click', function() {
      starOptions.forEach(s => {
        s.style.transform = 'scale(1)';
        s.style.border = '3px solid transparent';
      });
      this.style.transform = 'scale(1.1)';
      this.style.border = '3px solid #4217f4';
      selectedStarValue = this.getAttribute('data-value');
      selectedStarsInput.value = selectedStarValue;
      starsPreview.textContent = selectedStarValue + '/5';
    });
  });

  // Gestion des boutons suivants avec validation
  const buttons = document.querySelectorAll('.next-btn');
  buttons.forEach(function(btn) {
    btn.addEventListener('click', function() {
      const currentStep = this.closest('.form-step');
      const currentStepId = currentStep.id.split('-')[1];
      const nextId = this.getAttribute('data-next');
      
      // Valider l'étape actuelle avant de passer à la suivante
      if (validateStep(currentStepId)) {
        const nextStep = document.getElementById('step-' + nextId);
        
        if (nextStep) {
          currentStep.style.display = 'none';
          nextStep.style.display = 'block';
        }
      }
    });
  });

  // Validation en temps réel pour les champs
  document.querySelectorAll('.form-input, .form-textarea').forEach(input => {
    input.addEventListener('input', function() {
      const errorId = this.name + '-error';
      const errorElement = document.getElementById(errorId);
      if (errorElement) {
        errorElement.style.display = 'none';
      }
    });
  });

  // Captcha
  const num1 = Math.floor(Math.random() * 10);
  const num2 = Math.floor(Math.random() * 10);
  const result = num1 + num2;
  document.getElementById('captcha-label').textContent = "Combien font " + num1 + " + " + num2 + " ?";

  // Gestion de l'envoi du formulaire
  const form = document.getElementById('contactForm');
  form.addEventListener('submit', function(event) {
    event.preventDefault();
    
    const userAnswer = parseInt(document.getElementById('captcha-input').value);
    const captchaError = document.getElementById('captcha-error');
    
    if (userAnswer !== result) {
      captchaError.style.display = 'block';
      return;
    } else {
      captchaError.style.display = 'none';
    }

    // Envoi du formulaire
    const formData = new FormData(form);
    
    fetch(form.action, {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // Succès
        document.getElementById('successMessageTop').style.display = 'block';
        document.getElementById('successMessageBottom').style.display = 'block';
        form.reset();
        
        // Réinitialiser à l'étape 1
        document.querySelectorAll('.form-step').forEach(step => {
          step.style.display = 'none';
        });
        document.getElementById('step-1').style.display = 'block';
        
        // Cacher tous les messages d'erreur
        document.querySelectorAll('.error-message').forEach(error => {
          error.style.display = 'none';
        });
        
        // Cacher les messages après 5 secondes
        setTimeout(() => {
          document.getElementById('successMessageTop').style.display = 'none';
          document.getElementById('successMessageBottom').style.display = 'none';
        }, 5000);
      } else {
        alert('Une erreur est survenue, veuillez réessayer.');
      }
    })
    .catch(error => {
      alert('Une erreur est survenue, veuillez réessayer.');
    });
  });
});

// Pour le bouton d'ouverture
document.addEventListener('DOMContentLoaded', function() {
  const openAvisBtn = document.getElementById('open-avis-btn');
  if (openAvisBtn) {
    openAvisBtn.style.cursor = 'pointer';
    openAvisBtn.addEventListener('click', showAvisPopup);
  }
});</script></body></html>