<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Conditions générales de vente</title><meta name="description" content="Voici nos conditions générales de vente, lors d'un achat sur la boutique en ligne"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://mimistok.com/media/plugins/syntaxHighlighter/prism-black.css"><link rel="stylesheet" href="https://mimistok.com/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://mimistok.com/conditions-generales/"><link rel="alternate" type="application/atom+xml" href="https://mimistok.com/feed.xml" title="mimistok - RSS"><link rel="alternate" type="application/json" href="https://mimistok.com/feed.json" title="mimistok - JSON"><meta property="og:title" content="Conditions générales"><meta property="og:image" content="https://mimistok.com/media/website/mimistoklogo.svg"><meta property="og:image:width" content="50"><meta property="og:image:height" content="50"><meta property="og:site_name" content="mimistok"><meta property="og:description" content="Voici nos conditions générales de vente, lors d'un achat sur la boutique en ligne"><meta property="og:url" content="https://mimistok.com/conditions-generales/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://mimistok.com/media/website/mimi-2.svg" type="image/x-icon"><link rel="stylesheet" href="https://mimistok.com/assets/css/style.css?v=512d60eb8c44102eb1551c199954f68c"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://mimistok.com/conditions-generales/"},"headline":"Conditions générales","datePublished":"2025-10-16T01:03+02:00","dateModified":"2025-10-16T07:41+02:00","image":{"@type":"ImageObject","url":"https://mimistok.com/media/website/mimistoklogo.svg","height":50,"width":50},"description":"Voici nos conditions générales de vente, lors d'un achat sur la boutique en ligne","author":{"@type":"Person","name":"mimistok","url":"https://mimistok.com/authors/mimistok/"},"publisher":{"@type":"Organization","name":"mimistok","logo":{"@type":"ImageObject","url":"https://mimistok.com/media/website/mimistoklogo.svg","height":50,"width":50}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><script defer="defer" src="https://cloud.umami.is/script.js" data-website-id="42ea37ac-125a-4569-a4fb-b8c82dea3aeb"></script><meta name="achatmoinscher.com" value="01950uvivua7npkdh7npxx0glt199fawry2jf3th03rv4yycy2"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "OnlineStore",
      "@id": "https://mimistok.com#store",
      "name": "Mimistok",
      "url": "https://mimistok.com",
      "image": "https://mimistok.com/media/store-banner.jpg",
      "description": "Mimistok est une boutique en ligne spécialisée dans la vente de produits high-tech de Chine à prix d’usine : Xiaomi, Baseus, Laifen, Obsbot et plus.",
      "priceRange": "€€",
      "currenciesAccepted": "EUR",
      "paymentAccepted": "Visa, MasterCard, PayPal",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "FR"
      },
      "brand": [
        { "@type": "Brand", "name": "Xiaomi" },
        { "@type": "Brand", "name": "Baseus" },
        { "@type": "Brand", "name": "Laifen" },
        { "@type": "Brand", "name": "Obsbot" }
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "320"
      },
      "offers": {
        "@type": "AggregateOffer",
        "lowPrice": "5.00",
        "highPrice": "299.00",
        "offerCount": "120",
        "priceCurrency": "EUR",
        "availability": "https://schema.org/InStock",
        "url": "https://mimistok.com"
      },
      "sameAs": [
        "https://www.facebook.com/mimistok",
        "https://www.instagram.com/mimistok",
        "https://www.linkedin.com/company/mimistok"
      ]
    },
    {
      "@type": "Organization",
      "@id": "https://mimistok.com#organization",
      "name": "Mimistok",
      "url": "https://mimistok.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://mimistok.com/media/logo.png",
        "width": 200,
        "height": 200
      },
      "sameAs": [
        "https://www.facebook.com/mimistok",
        "https://www.instagram.com/mimistok",
        "https://www.linkedin.com/company/mimistok"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://mimistok.com#website",
      "url": "https://mimistok.com",
      "name": "Mimistok",
      "description": "Boutique en ligne de produits high-tech chinois à prix d’usine. Découvrez les meilleures marques comme Xiaomi, Baseus, Laifen et Obsbot.",
      "inLanguage": "fr-FR",
      "publisher": {
        "@id": "https://mimistok.com#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://mimistok.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string",
        "description": "Rechercher des produits en stock sur la boutique en ligne Mimistok."
      }
    }
  ]
}</script><style>.fi{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}*{vector-effect: non-scaling-stroke; }</style></head><body class="page-template"><div id="panier-flottant"><div class="infos"><span class="quantite">0</span> <span class="total">€0.00</span></div><button class="btn-payer-flottant">Payer</button></div><style>/* --- Panier flottant --- */
#panier-flottant {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 20px);
  max-width: 600px;
  background: rgba(30, 30, 30, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.4);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 10px;
  font-family: sans-serif;
  font-size: 16px; /* 16px pour éviter le zoom sur iOS */
  color: #fff;
  z-index: 2147483647;
  touch-action: manipulation; /* empêche double-tap zoom */
}

/* Infos quantité / total */
#panier-flottant .infos {
  flex: 1 1 auto;
  font-weight: 500;
  margin-right: 15px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-left: 18px;
  padding-right: 8px;
}

/* Bouton payer */
#panier-flottant .btn-payer-flottant {
  background: #007BFF;
  color: #fff;
  border: none;
  padding: 12px 32px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: bold;
  font-size: 16px; /* 16px pour iOS */
  text-align: center;
  transition: transform 0.2s, background 0.3s;
  flex-shrink: 0;
  margin-right: 8px;
  touch-action: manipulation; /* empêche double-tap zoom */
}

#panier-flottant .btn-payer-flottant:hover {
  background: #0056d2;
  transform: scale(1.05);
}

/* Petit espace supplémentaire pour mobile */
@media (max-width: 480px) {
  #panier-flottant {
    width: calc(100% - 20px);
    padding: 14px 10px;
  }
}

/* Empêche zoom sur tous les boutons / inputs globaux */
button, input, select, textarea {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-touch-action: manipulation;
  touch-action: manipulation;
}</style><script>// --- Fonctions panier flottant ---
function jouerSonAjout() {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.type = 'triangle';      
    osc.frequency.value = 1200; 
    gain.gain.setValueAtTime(0.08, ctx.currentTime); 
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.12);

    osc.start();
    osc.stop(ctx.currentTime + 0.12);
}

function ajouterProduitAuPanier(priceId, nom, prix, quantite) {
    console.log('Ajout au panier:', { priceId, nom, prix, quantite });
    jouerSonAjout();

    let panier = JSON.parse(localStorage.getItem('panier')) || [];
    const produitExistant = panier.find(item => item.priceId === priceId);

    if (produitExistant) {
        produitExistant.quantite += quantite;
    } else {
        panier.push({ priceId, nom, prix, quantite });
    }

    localStorage.setItem('panier', JSON.stringify(panier));
    mettreAJourPanierFlottant();
}

function mettreAJourPanierFlottant() {
    const panier = JSON.parse(localStorage.getItem('panier')) || [];
    const totalItems = panier.reduce((t, i) => t + i.quantite, 0);
    const totalPrix = panier.reduce((t, i) => t + (i.prix * i.quantite), 0);

    const flottant = document.getElementById('panier-flottant');
    const quantiteElem = document.querySelector('#panier-flottant .quantite');
    const totalElem = document.querySelector('#panier-flottant .total');
    const btnElem = document.querySelector('#panier-flottant .btn-payer-flottant');

    if (quantiteElem && totalElem) {
        quantiteElem.textContent = `${totalItems} ${totalItems > 1 ? 'articles' : 'article'} – `;
        totalElem.textContent = `€${totalPrix.toFixed(2)}`;
    }

    if (flottant) flottant.classList.add('visible');

    if (btnElem) btnElem.textContent = 'Mon Panier';
}

// --- Initialisation ---
document.addEventListener('DOMContentLoaded', function() {
    mettreAJourPanierFlottant();

    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('btn-payer-flottant')) {
            window.location.href = '/panier';
        }
    });
});</script><script>function fixImages() {
    if (window.innerWidth >= 1024) {
      document.querySelectorAll('.content__featured-image--attop img.is-loaded').forEach(img => {
        img.removeAttribute('srcset'); // Supprime le srcset pour éviter le flou progressif
        img.style.imageRendering = ''; // Réinitialise toute manipulation CSS de rendu
      });
    }
  }
  window.addEventListener('load', fixImages);
  window.addEventListener('resize', fixImages);</script><script>// Cacher le panier flottant sur la page panier
if (window.location.pathname.includes('/panier/') || 
    window.location.href.includes('/panier/') ||
    document.body.classList.contains('page-panier')) {
    
    const panierFlottant = document.getElementById('panier-flottant');
    if (panierFlottant) {
        panierFlottant.style.display = 'none';
    }
}</script><script>document.querySelector('.open-search-btn').addEventListener('click', function() {
    document.getElementById('popup').style.display = 'flex';
});</script><div class="container container--nosidebar"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://mimistok.com/"><img src="https://mimistok.com/media/website/mimistoklogo.svg" alt="mimistok" width="50" height="50"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a class="tltp" href="https://mimistok.com/" target="_self" aria-label="Accueil"><svg class="fi fi-home" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#home"/></svg> <span>Accueil</span></a></li><li class="open-search-btn"><span class="tltp" aria-label="Rechercher un produit"><svg class="fi fi-search" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#search"/></svg> <span>Rechercher un produit</span></span></li><li><a class="tltp" href="https://mimistok.com/panier/" target="_self" aria-label="Votre panier"><svg class="fi fi-shopping-cart" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#shopping-cart"/></svg> <span>Votre panier</span></a></li><li><a class="tltp" href="https://mimistok.com/notre-concept/" target="_self" aria-label="Le concept"><svg class="fi fi-coffee" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#coffee"/></svg> <span>Le concept</span></a></li><li><a class="tltp" href="https://mimistok.com/contactez-nous/" target="_self" aria-label="Contact"><svg class="fi fi-mail" width="32px" height="32px" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><use href="https://mimistok.com/media/plugins/featherIcons/feather-sprite.svg#mail"/></svg> <span>Contact</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://mimistok.com/"><img src="https://mimistok.com/media/website/mimistoklogo.svg" alt="mimistok" width="50" height="50"></a></header></div></div><main class="main page"><article class="content"><div class="main__inner"><header class="content__header"><h1 class="content__title">Conditions générales</h1></header><div class="content__entry"><h1 data-start="285" data-end="337"><figure class="post__image post__image--center"><img loading="lazy" src="https://mimistok.com/media/posts/44/undraw_knowledge_0ty5.svg" alt="" width="200" height="215"></figure></h1><h1 data-start="285" data-end="337"><strong data-start="287" data-end="337">Conditions Générales de Vente (CGV) – MIMISTOK</strong></h1><p data-start="339" data-end="501"><strong data-start="339" data-end="360">Éditeur du site :</strong><br data-start="360" data-end="363">MIMISTOK<br data-start="371" data-end="374">SIREN : 751 090 192<br data-start="393" data-end="396">SIRET : 751 090 192 00038<br data-start="421" data-end="424">Le site MIMISTOK est un site de vente en ligne de <strong>high-tech, haut-de-gamme</strong>.</p><h2 data-start="595" data-end="610"><strong data-start="598" data-end="610">1. Objet</strong></h2><p data-start="612" data-end="746">Les présentes Conditions Générales de Vente (CGV) régissent les ventes de produits sur le site internet <strong data-start="716" data-end="736"><a data-start="718" data-end="734" rel="noopener" target="_new" class="decorated-link cursor-pointer">www.mimistok.com<svg width="20" height="20" viewbox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" data-rtl-flip="" class="block h-[0.75em] w-[0.75em] stroke-current stroke-[0.75]"><path d="M14.3349 13.3301V6.60645L5.47065 15.4707C5.21095 15.7304 4.78895 15.7304 4.52925 15.4707C4.26955 15.211 4.26955 14.789 4.52925 14.5293L13.3935 5.66504H6.66011C6.29284 5.66504 5.99507 5.36727 5.99507 5C5.99507 4.63273 6.29284 4.33496 6.66011 4.33496H14.9999L15.1337 4.34863C15.4369 4.41057 15.665 4.67857 15.665 5V13.3301C15.6649 13.6973 15.3672 13.9951 14.9999 13.9951C14.6327 13.9951 14.335 13.6973 14.3349 13.3301Z"></path></svg></a></strong>entre :</p><ul data-start="747" data-end="866"><li data-start="747" data-end="780"><p data-start="749" data-end="780"><strong data-start="749" data-end="774">Le vendeur : MIMISTOK</strong>, et</p></li><li data-start="781" data-end="866"><p data-start="783" data-end="866"><strong data-start="783" data-end="796">Le client</strong>, toute personne physique ou morale effectuant un achat sur le site.</p></li></ul><h2 data-start="868" data-end="886"><strong data-start="871" data-end="886">2. Produits</strong></h2><p data-start="888" data-end="1095">Les produits proposés à la vente sont ceux figurant sur le site au jour de la consultation du site par le client.<br data-start="1001" data-end="1004">Chaque produit est accompagné d’un descriptif reprenant ses principales caractéristiques.</p><h2 data-start="1097" data-end="1111"><strong data-start="1100" data-end="1111">3. Prix</strong></h2><p data-start="1113" data-end="1375">Les prix des produits sont indiqués en euros toutes taxes comprises (TTC), hors frais de livraison.<br data-start="1212" data-end="1215">MIMISTOK se réserve le droit de modifier ses prix à tout moment, mais les produits seront facturés sur la base des tarifs en vigueur au moment de la commande.</p><h2 data-start="1377" data-end="1395"><strong data-start="1380" data-end="1395">4. Commande</strong></h2><p data-start="1397" data-end="1598">La commande sur le site implique l’acceptation sans réserve des présentes CGV.<br data-start="1475" data-end="1478">Le client peut passer commande en suivant le processus indiqué sur le site.<br data-start="1553" data-end="1556">MIMISTOK confirme la commande par email.</p><h2 data-start="1600" data-end="1618"><strong data-start="1603" data-end="1618">5. Paiement</strong></h2><p data-start="1620" data-end="1827">Le paiement est exigible immédiatement à la commande.<br data-start="1673" data-end="1676">Les moyens de paiement acceptés sont : carte bancaire, par <strong>Stripe</strong>.<br data-start="1757" data-end="1760">Le site utilise des systèmes sécurisés pour le paiement en ligne.</p><h2 data-start="1829" data-end="1848"><strong data-start="1832" data-end="1848">6. Livraison</strong></h2><p data-start="1850" data-end="2187">Les produits sont livrés à l’adresse indiquée par le client lors de la commande.<br data-start="1930" data-end="1933">Les délais de livraison sont donnés à titre indicatif et MIMISTOK ne pourra être tenu responsable d’éventuels retards liés à des transporteurs.<br data-start="2076" data-end="2079">Les frais de livraison sont à la charge du client et seront précisés avant la confirmation de la commande.</p><h2 data-start="2189" data-end="2220"><strong data-start="2192" data-end="2220">7. Droit de rétractation</strong></h2><p data-start="2222" data-end="2450">Conformément à la <strong data-start="2240" data-end="2253">loi Hamon</strong>, le client dispose d’un délai de <strong data-start="2287" data-end="2311">14 jours calendaires</strong> à compter de la réception des produits pour exercer son droit de rétractation, sans avoir à justifier de motifs ni à payer de pénalités.</p><p data-start="2452" data-end="2597">Pour exercer ce droit, le client doit contacter MIMISTOK par email ou courrier et renvoyer le produit à ses frais dans son emballage d’origine.</p><p data-start="2599" data-end="2627"><strong data-start="2599" data-end="2625">Conditions de retour :</strong></p><ul data-start="2628" data-end="2927"><li data-start="2628" data-end="2684"><p data-start="2630" data-end="2684">Les produits doivent être retournés en parfait état.</p></li><li data-start="2685" data-end="2762"><p data-start="2687" data-end="2762">Les produits endommagés, incomplets ou salis ne pourront pas être repris.</p></li><li data-start="2763" data-end="2927"><p data-start="2765" data-end="2927">Le remboursement se fera dans un délai de <strong data-start="2807" data-end="2819">14 jours</strong> après réception du produit retourné, par le même moyen de paiement que celui utilisé lors de la commande.</p></li></ul><h2 data-start="2929" data-end="2947"><strong data-start="2932" data-end="2947">8. Garantie</strong></h2><p data-start="2949" data-end="3187">Tous les produits vendus bénéficient de la garantie légale de conformité et de la garantie contre les vices cachés, conformément aux articles L.217-4 et suivants du Code de la consommation et aux articles 1641 et suivants du Code civil.</p><h2 data-start="3189" data-end="3213"><strong data-start="3192" data-end="3213">9. Responsabilité</strong></h2><p data-start="3215" data-end="3434">MIMISTOK ne pourra être tenu responsable des dommages directs ou indirects liés à l’utilisation du site ou des produits vendus.<br data-start="3342" data-end="3345">La responsabilité de MIMISTOK est strictement limitée au montant de la commande passée.</p><h2 data-start="3436" data-end="3482"><strong data-start="3439" data-end="3482">10. Protection des données personnelles</strong></h2><p data-start="3484" data-end="3797">Les données personnelles collectées lors de la commande sont nécessaires pour le traitement de la commande et sont traitées conformément à la <strong data-start="3626" data-end="3658">loi Informatique et Libertés</strong>.<br data-start="3659" data-end="3662">Le client dispose d’un droit d’accès, de modification et de suppression de ses données personnelles en contactant MIMISTOK à [email].</p><h2 data-start="3799" data-end="3834"><strong data-start="3802" data-end="3834">11. Propriété intellectuelle</strong></h2><p data-start="3836" data-end="4010">Tous les éléments du site MIMISTOK (textes, images, logos, marques) sont protégés par le droit de la propriété intellectuelle et ne peuvent être utilisés sans autorisation.</p><h2 data-start="4012" data-end="4048"><strong data-start="4015" data-end="4048">12. Loi applicable et litiges</strong></h2><p data-start="4050" data-end="4217">Les présentes CGV sont soumises à la <strong data-start="4087" data-end="4104">loi française</strong>.<br data-start="4105" data-end="4108">En cas de litige, une solution amiable sera recherchée. À défaut, les tribunaux français seront compétents.</p><div style="margin: 40px 0; text-align: center;"> </div><div style="height: 4px; background: linear-gradient(90deg, transparent, #3498db, #9b59b6, #3498db, transparent); border-radius: 2px; position: relative; max-width: 300px; margin: 0 auto;"> </div></div></div></article></main></div><script defer="defer" src="https://mimistok.com/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><style>#popup {
    position: fixed;
    inset: 0;
    background: rgba(22, 23, 24, 0.80);
    backdrop-filter: blur(15px);
    display: none;
    justify-content: center;
    align-items: flex-start;
    z-index: 99999;
    opacity: 0;
    transition: opacity 0.4s ease;
    padding-top: 80px;
  }
  #popup.show {
    display: flex;
    opacity: 1;
  }
  body.no-scroll {
    overflow: hidden;
  }

  #search-container-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    padding: 0 20px;
    box-sizing: border-box;
  }

  #search-input-popup {
    padding: 13px 25px;
    width: 100%;
    max-width: 690px;
    border-radius: 30px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    font-size: 18px;
    background: rgba(30, 30, 30, 0.75);
    color: #FFFFFF;
    backdrop-filter: blur(15px);
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    margin-bottom: 15px;
    box-sizing: border-box;
    font-size: 16px;
    transform: scale(1);
  }

  #search-input-popup::placeholder {
    color: rgba(255, 255, 255, 0.6);
    font-size: 18px;
  }

  #search-input-popup:focus {
    outline: none;
    border-color: #2196F3;
    box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.4), 0 6px 20px rgba(0, 0, 0, 0.4);
    transform: scale(1.02);
  }

  #search-results-container-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 690px;
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 15px;
    margin-right: -5px;
    box-sizing: border-box;
  }

  #search-results-container-popup::-webkit-scrollbar {
    width: 8px;
  }

  #search-results-container-popup::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
    margin: 8px 0;
  }

  #search-results-container-popup::-webkit-scrollbar-thumb {
    background: rgba(33, 150, 243, 0.6);
    border-radius: 4px;
    border: 2px solid rgba(22, 23, 24, 0.8);
  }

  #search-results-container-popup::-webkit-scrollbar-thumb:hover {
    background: rgba(33, 150, 243, 0.8);
  }

  .result-item-popup {
    display: flex;
    align-items: center;
    width: 100%;
    margin: 10px 0;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    cursor: pointer;
    background: rgba(50, 50, 50, 0.65);
    backdrop-filter: blur(15px);
    transition: all 0.3s ease;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    box-sizing: border-box;
  }

  .result-item-popup:hover {
    background: rgba(70, 70, 70, 0.75);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }

  .result-img-popup {
    width: 55px;
    height: 55px;
    object-fit: cover;
    border-radius: 10px;
    margin-right: 18px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .result-title-popup {
    font-size: 18px;
    color: #FFFFFF;
    font-weight: 500;
    flex: 1;
  }

  .result-price-popup {
    background: #2196F3;
    color: white;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    margin-left: 10px;
    white-space: nowrap;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-in-popup {
    animation: fadeIn 0.3s ease forwards;
  }

  #popup-close {
    position: fixed;
    top: 25px;
    right: 20px;
    width: 45px;
    height: 45px;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    z-index: 100000;
  }

  @media (max-width: 768px) {
    #popup {
      padding-top: 100px;
      align-items: flex-start;
    }
    
    #search-container-popup {
      padding: 0 15px;
    }
    
    #search-input-popup {
      padding: 15px 20px;
      font-size: 16px;
      max-width: 100%;
      border-radius: 25px;
      margin-left: 10px;
      margin-right: 10px;
    }
    
    #search-input-popup::placeholder {
      font-size: 16px;
    }
    
    #search-results-container-popup {
      max-width: 100%;
      padding: 0 8px 0 5px;
      box-sizing: border-box;
      max-height: 300px;
      margin-right: 0;
    }
    
    .result-item-popup {
      padding: 12px;
      margin: 8px 0;
      width: calc(100% - 20px);
    }
    
    .result-img-popup {
      width: 45px;
      height: 45px;
      margin-right: 15px;
    }
    
    .result-title-popup {
      font-size: 16px;
    }
    
    .result-price-popup {
      font-size: 13px;
      padding: 5px 12px;
    }
    
    #popup-close {
      top: 20px;
      right: 15px;
      width: 40px;
      height: 40px;
    }
  }

  @media (max-width: 480px) {
    #popup {
      padding-top: 90px;
    }
    
    #search-container-popup {
      padding: 0 10px;
    }
    
    #search-input-popup {
      padding: 14px 18px;
      font-size: 16px;
      margin-left: 5px;
      margin-right: 5px;
    }
    
    #search-input-popup::placeholder {
      font-size: 16px;
    }
    
    .result-item-popup {
      padding: 12px;
      width: calc(100% - 10px);
    }
    
    .result-img-popup {
      width: 40px;
      height: 40px;
      margin-right: 12px;
    }
    
    .result-title-popup {
      font-size: 15px;
    }
    
    .result-price-popup {
      font-size: 12px;
      padding: 4px 10px;
    }
    
    #popup-close {
      top: 15px;
      right: 10px;
      width: 35px;
      height: 35px;
    }
  }

  @media screen and (max-width: 768px) {
    #search-input-popup {
      font-size: 16px !important;
      transform: scale(1) !important;
    }
  }</style><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div id="popup" aria-hidden="true" role="dialog" aria-modal="true"><button id="popup-close" title="Fermer" aria-label="Fermer"><svg width="100%" height="100%" viewBox="0 0 40 40" fill="none"><circle cx="20" cy="20" r="20" fill="rgba(255, 255, 255, 0.05)"/><path d="M25 15L15 25M15 15L25 25" stroke="white" stroke-width="2" stroke-linecap="round"/></svg></button><div id="search-container-popup"><input id="search-input-popup" type="text" placeholder="Tapez un mot-clé..."><div id="search-results-container-popup"></div></div></div><script>// LOGIQUE DU POPUP
const popup = document.getElementById('popup');
const popupCloseBtn = document.getElementById('popup-close');
const openSearchBtn = document.getElementById('open-search-btn');

function showPopup() {
  popup.style.display = 'flex';
  setTimeout(() => {
    popup.classList.add('show');
    popup.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');
    
    setTimeout(() => {
      const searchInput = document.getElementById('search-input-popup');
      searchInput.focus();
      
      if (window.innerWidth <= 768) {
        searchInput.style.fontSize = '16px';
        searchInput.style.transform = 'scale(1)';
      }
    }, 300);
  }, 10);
}

function hidePopup() {
  popup.classList.remove('show');
  popup.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('no-scroll');
  
  popup.addEventListener('transitionend', function handler() {
    if (!popup.classList.contains('show')) {
      popup.style.display = 'none';
    }
    popup.removeEventListener('transitionend', handler);
  });
}

// Événements
if (openSearchBtn) {
  openSearchBtn.addEventListener('click', showPopup);
}
popupCloseBtn.addEventListener('click', hidePopup);

// Fermer avec Échap
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape' && popup.classList.contains('show')) {
    hidePopup();
  }
});

// Fermer en cliquant en dehors
popup.addEventListener('click', function(e) {
  if (e.target === popup) {
    hidePopup();
  }
});

// SYSTÈME DE RECHERCHE
let pagesIndex = [];

fetch('/search02.json')
  .then(response => response.json())
  .then(data => {
    pagesIndex = data;
  });

const inputPopup = document.getElementById('search-input-popup');
const resultsContainerPopup = document.getElementById('search-results-container-popup');

inputPopup.addEventListener('input', function() {
  const query = inputPopup.value.trim().toLowerCase();
  resultsContainerPopup.innerHTML = '';
  
  if (!query) return;

  const matches = pagesIndex.filter(p => p.title.toLowerCase().includes(query));

  matches.forEach((p, index) => {
    const resultDiv = document.createElement('div');
    resultDiv.className = 'result-item-popup fade-in-popup';
    resultDiv.style.animationDelay = `${index * 0.05}s`;

    const img = document.createElement('img');
    img.src = p.image || '';
    img.className = 'result-img-popup';
    img.alt = p.title;
    
    const title = document.createElement('span');
    title.textContent = p.title;
    title.className = 'result-title-popup';

    const price = document.createElement('span');
    price.textContent = `${p.price}€`;
    price.className = 'result-price-popup';

    resultDiv.appendChild(img);
    resultDiv.appendChild(title);
    resultDiv.appendChild(price);

    resultDiv.addEventListener('click', function() {
      window.location.href = p.url;
    });

    resultsContainerPopup.appendChild(resultDiv);
  });
});

// ENTREE = FERMER LE CLAVIER SEULEMENT
inputPopup.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    this.blur();
  }
});

// Empêcher le zoom sur l'input
inputPopup.addEventListener('touchstart', function(e) {
  if (window.innerWidth <= 768) {
    this.style.fontSize = '16px';
  }
});

inputPopup.addEventListener('focus', function(e) {
  if (window.innerWidth <= 768) {
    this.style.fontSize = '16px';
  }
});</script><script>// CODE CORRIGÉ POUR LE MENU - remplace l'ancien
document.addEventListener('DOMContentLoaded', function() {
  const menuItem = document.querySelector('.open-search-btn');
  if (menuItem) {
    menuItem.style.cursor = 'pointer';
    menuItem.addEventListener('click', function(e) {
      e.preventDefault();
      const popup = document.getElementById('popup');
      popup.style.display = 'flex';
      setTimeout(() => {
        popup.classList.add('show');
        popup.setAttribute('aria-hidden', 'false');
        document.body.classList.add('no-scroll');
        
        setTimeout(() => {
          const searchInput = document.getElementById('search-input-popup');
          if (searchInput) searchInput.focus();
        }, 300);
      }, 10);
    });
  }
});</script><style>#popup-avis {
  position: fixed;
  inset: 0;
  background: rgba(22, 23, 24, 0.95);
  backdrop-filter: blur(10px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  opacity: 0;
  transition: opacity 0.4s ease;
}
#popup-avis.show {
  display: flex;
  opacity: 1;
}
body.no-scroll {
  overflow: hidden;
}
.form-container-popup {
  background: transparent;
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}
.close-bottom-btn {
  display: block;
  margin: 50px auto 20px auto;
  padding: 12px 30px;
  background: white;
  color: #333;
  border: 2px solid #ddd;
  border-radius: 999px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  width: auto;
  min-width: 120px;
}
.form-input, .form-textarea {
  font-size: 16px;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 6px;
  width: 100%;
  margin-bottom: 15px;
  background: rgba(60, 60, 60, 0.7) !important;
  color: white !important;
}
.form-input:invalid, .form-textarea:invalid {
  border-color: #ff4444;
}
.form-input::placeholder, .form-textarea::placeholder {
  color: rgba(255, 255, 255, 0.7) !important;
}
.error-message {
  color: #ff4444;
  font-size: 14px;
  margin-top: -10px;
  margin-bottom: 15px;
  display: none;
}
.avatar-carousel {
  display: flex;
  gap: 15px;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding: 20px 10px;
  margin-bottom: 20px;
  scrollbar-width: thin;
}
.avatar-option {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 3px solid transparent;
  flex-shrink: 0;
}
.avatar-option.selected {
  border: 3px solid #4217f4;
  transform: scale(1.1);
}
.avatar-option img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}
@media (max-width: 768px) {
  .form-container-popup { width: 95%; }
  .avatar-carousel { gap: 10px; padding: 15px 5px; }
  .avatar-option { width: 60px; height: 60px; }
}</style><style>#popup-avis {
    position: fixed;
    inset: 0;
    background: rgba(22, 23, 24, 0.95);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 99999;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  
  #popup-avis.show {
    display: flex;
    opacity: 1;
  }
  
  body.no-scroll {
    overflow: hidden;
  }

  .form-container-popup {
    background: transparent;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
  }

  .close-bottom-btn {
    display: block;
    margin: 50px auto 20px auto;
    padding: 12px 30px;
    background: white;
    color: #333;
    border: 2px solid #ddd;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    width: auto;
    min-width: 120px;
  }

  .form-input {
    font-size: 16px;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    margin-bottom: 15px;
    background: rgba(60, 60, 60, 0.7) !important;
    color: white !important;
  }

  .form-input:invalid {
    border-color: #ff4444;
  }

  .form-input::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .form-textarea {
    font-size: 16px;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    margin-bottom: 15px;
    min-height: 100px;
    resize: vertical;
    font-family: inherit;
    background: rgba(60, 60, 60, 0.7) !important;
    color: white !important;
  }

  .form-textarea:invalid {
    border-color: #ff4444;
  }

  .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .error-message {
    color: #ff4444;
    font-size: 14px;
    margin-top: -10px;
    margin-bottom: 15px;
    display: none;
  }

  .avatar-carousel {
    display: flex;
    gap: 15px;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 20px 10px;
    margin-bottom: 20px;
    scrollbar-width: thin;
  }

  .avatar-option {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 3px solid transparent;
    flex-shrink: 0;
  }

  .avatar-option.selected {
    border: 3px solid #4217f4;
    transform: scale(1.1);
  }

  .avatar-option img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }

  @media (max-width: 768px) {
    .form-container-popup {
      width: 95%;
    }
    
    .avatar-carousel {
      gap: 10px;
      padding: 15px 5px;
    }
    
    .avatar-option {
      width: 60px;
      height: 60px;
    }
  }</style><div id="popup-avis" aria-hidden="true" role="dialog" aria-modal="true"><div class="form-container-popup"><div style="text-align: center; margin-bottom: 20px;"><img src="https://image.mimistok.com/smile.svg" alt="Notation" width="100" height="100"></div><div style="max-width: 400px; margin: 0 auto; text-align: center;"><form id="contactForm" action="https://api.web3forms.com/submit" method="POST"><input name="access_key" type="hidden" value="7fee4d4b-e46f-49f8-9858-4d07d0732e87"> <input id="selectedAvatar" name="avatar" type="hidden" value="https://image.mimistok.com/women1.svg"><div id="step-1" class="form-step"><div style="font-size: 16px; margin-bottom: 15px; color: white; font-weight: 500;">Sélectionnez votre image de profil</div><div class="avatar-carousel" id="avatarCarousel"></div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="2">Étape suivante</button></div><div id="step-2" class="form-step" style="display: none;"><input class="form-input" name="nom" required type="text" placeholder="Votre nom ou pseudo *"><div class="error-message" id="nom-error">Veuillez saisir votre nom ou pseudo</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="3">Étape suivante</button></div><div id="step-3" class="form-step" style="display: none;"><div id="starSelector" style="display: block; margin-bottom: 20px;"><div style="font-size: 16px; margin-bottom: 15px; color: white; font-weight: 500;">Sélectionnez votre note *</div><div id="starsContainer" style="display: flex; justify-content: center; gap: 12px; margin-bottom: 15px;"><div class="star-option" style="width: 50px; height: 50px; background: #d35400; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="1">1</div><div class="star-option" style="width: 50px; height: 50px; background: #e74c3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="2">2</div><div class="star-option" style="width: 50px; height: 50px; background: #2c3e50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="3">3</div><div class="star-option" style="width: 50px; height: 50px; background: #8e44ad; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid transparent;" data-value="4">4</div><div class="star-option" style="width: 50px; height: 50px; background: #f39c12; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border: 3px solid #4217f4; transform: scale(1.1);" data-value="5">5</div></div></div><input id="selectedStars" name="nombre_etoiles" required type="hidden" value="5"><div id="selectedStarsDisplay" style="display: block; margin-bottom: 15px;"><div style="font-size: 14px; color: white; margin-bottom: 5px;">Note sélectionnée :</div><div id="starsPreview" style="font-size: 18px; font-weight: bold; color: #4217f4;">5/5</div></div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="4">Étape suivante</button></div><div id="step-4" class="form-step" style="display: none;"><textarea class="form-textarea" name="commentaire" required placeholder="Votre commentaire *"></textarea><div class="error-message" id="commentaire-error">Veuillez saisir votre commentaire</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="5">Étape suivante</button></div><div id="step-5" class="form-step" style="display: none;"><input class="form-input" name="email" required type="email" placeholder="Votre email *"><div class="error-message" id="email-error">Veuillez saisir un email valide</div><button class="next-btn" style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="button" data-next="6">Étape suivante</button></div><div id="step-6" class="form-step" style="display: none;"><label id="captcha-label" style="font-size: 15px; font-weight: bold; color: white; display: block; margin-bottom: 10px;"></label> <input class="form-input" id="captcha-input" name="captcha" required type="text" placeholder="Réponse *" style="width: 50%; margin: 0 auto 15px auto; text-align: center; display: block;"><div class="error-message" id="captcha-error">Veuillez saisir la réponse correcte</div><button style="background-color: #4217f4; color: white; padding: 12px; width: 80%; border: none; border-radius: 999px; font-size: 16px; cursor: pointer;" type="submit">Envoyer</button></div><div id="successMessageBottom" style="display: none; background-color: #d4edda; color: #155724; font-weight: 500; border-radius: 999px; padding: 10px 18px; font-size: 14px; max-width: 300px; margin: 10px auto 0 auto;">Vérification en cours</div></form></div><button class="close-bottom-btn" onclick="hideAvisPopup()">Fermer</button></div></div><script>// FONCTION POPUP DIRECTE - ÇA MARCHE
function showPopup(type) {
  const popup = document.createElement('div');
  popup.style.cssText = 'position: fixed; inset: 0; background: rgba(22, 23, 24, 0.95); backdrop-filter: blur(10px); display: flex; justify-content: center; align-items: center; z-index: 99999;';
  
  const isApproved = type === 'approved';
  const imageUrl = isApproved ? 'https://image.mimistok.com/yes.svg' : 'https://image.mimistok.com/not.svg';
  const title = isApproved ? 'Votre avis sera bientôt publié' : 'Vous n\'avez effectué aucun achat';
  const bubbleText = isApproved ? 'approuvé' : 'refusé';
  const bubbleColor = isApproved ? '#FFA500' : '#FF4444';
  const description = isApproved 
    ? '<p style="font-size: 12px; margin: 5px 0 0 0; opacity: 0.7; line-height: 1.4;">Votre commentaire a bien été enregistré et sera publié<br>très prochainement sur notre plateforme.</p>'
    : '<p style="font-size: 12px; margin: 5px 0 0 0; opacity: 0.7; line-height: 1.4;">Vous avez effectué aucun achat sur notre site.<br>Vous ne pouvez donc pas déposer de commentaire.</p>';

  popup.innerHTML = `
    <div style="background: transparent; text-align: center; color: white; max-width: 400px; padding: 0 20px;">
      <img src="${imageUrl}" alt="${isApproved ? 'Succès' : 'Erreur'}" width="100" height="100" style="margin-bottom: 25px;">
      <h2 style="font-size: 28px; margin: 0 0 15px 0; font-weight: 600; color: white;">${title}</h2>
      <div style="background: ${bubbleColor}; color: white; padding: 8px 20px; border-radius: 999px; font-size: 16px; font-weight: 500; display: inline-block; margin-bottom: 15px;">${bubbleText}</div>
      ${description}
      <button onclick="this.parentElement.parentElement.remove()" style="margin-top: 40px; padding: 14px 40px; background: #FF5858; color: white; border: none; border-radius: 999px; font-size: 16px; font-weight: 500; cursor: pointer;">Fermer</button>
    </div>`;
  
  document.body.appendChild(popup);
}

// GESTION DU POPUP FORMULAIRE
const popupAvis = document.getElementById('popup-avis');

function showAvisPopup() {
  popupAvis.style.display = 'flex';
  setTimeout(() => {
    popupAvis.classList.add('show');
    popupAvis.setAttribute('aria-hidden', 'false');
    document.body.classList.add('no-scroll');
    
    document.querySelectorAll('.form-step').forEach(step => {
      step.style.display = 'none';
    });
    document.getElementById('step-1').style.display = 'block';
    
    document.querySelectorAll('.error-message').forEach(error => {
      error.style.display = 'none';
    });
    
  }, 10);
}

function hideAvisPopup() {
  popupAvis.classList.remove('show');
  popupAvis.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('no-scroll');
  
  popupAvis.addEventListener('transitionend', function handler() {
    if (!popupAvis.classList.contains('show')) {
      popupAvis.style.display = 'none';
    }
    popupAvis.removeEventListener('transitionend', handler);
  });
}

// GÉNÉRATION DU CARROUSEL D'AVATARS
function generateAvatarCarousel() {
  const carousel = document.getElementById('avatarCarousel');
  const selectedAvatarInput = document.getElementById('selectedAvatar');
  
  for (let i = 1; i <= 30; i++) {
    const womenDiv = document.createElement('div');
    womenDiv.className = 'avatar-option' + (i === 1 ? ' selected' : '');
    womenDiv.innerHTML = `<img src="https://image.mimistok.com/women${i}.svg" alt="Profil femme ${i}">`;
    womenDiv.addEventListener('click', function() {
      document.querySelectorAll('.avatar-option').forEach(avatar => {
        avatar.classList.remove('selected');
      });
      this.classList.add('selected');
      selectedAvatarInput.value = `https://image.mimistok.com/women${i}.svg`;
    });
    carousel.appendChild(womenDiv);
    
    const menDiv = document.createElement('div');
    menDiv.className = 'avatar-option';
    menDiv.innerHTML = `<img src="https://image.mimistok.com/men${i}.svg" alt="Profil homme ${i}">`;
    menDiv.addEventListener('click', function() {
      document.querySelectorAll('.avatar-option').forEach(avatar => {
        avatar.classList.remove('selected');
      });
      this.classList.add('selected');
      selectedAvatarInput.value = `https://image.mimistok.com/men${i}.svg`;
    });
    carousel.appendChild(menDiv);
  }
}

// FONCTION DE VALIDATION
function validateStep(stepId) {
  let isValid = true;
  
  switch(stepId) {
    case '2':
      const nomInput = document.querySelector('#step-2 .form-input');
      const nomError = document.getElementById('nom-error');
      if (!nomInput.value.trim()) {
        nomError.style.display = 'block';
        isValid = false;
      } else {
        nomError.style.display = 'none';
      }
      break;
      
    case '4':
      const commentaireInput = document.querySelector('#step-4 .form-textarea');
      const commentaireError = document.getElementById('commentaire-error');
      if (!commentaireInput.value.trim()) {
        commentaireError.style.display = 'block';
        isValid = false;
      } else {
        commentaireError.style.display = 'none';
      }
      break;
      
    case '5':
      const emailInput = document.querySelector('#step-5 .form-input');
      const emailError = document.getElementById('email-error');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailInput.value.trim() || !emailRegex.test(emailInput.value)) {
        emailError.style.display = 'block';
        isValid = false;
      } else {
        emailError.style.display = 'none';
      }
      break;
  }
  
  return isValid;
}

// FONCTION POUR RÉCUPÉRER TOUTES LES DONNÉES DU FORMULAIRE
function getAllFormData() {
  const form = document.getElementById('contactForm');
  const formData = new FormData(form);
  const data = {};
  
  // Récupérer toutes les valeurs du formulaire
  for (let [key, value] of formData.entries()) {
    data[key] = value;
  }
  
  // Ajouter des informations supplémentaires
  data.timestamp = new Date().toISOString();
  data.page_url = window.location.href;
  data.user_agent = navigator.userAgent;
  
  return data;
}

// LOGIQUE FORMULAIRE
let selectedStarValue = 5;

document.addEventListener('DOMContentLoaded', function() {
  generateAvatarCarousel();
  
  const starOptions = document.querySelectorAll('.star-option');
  const selectedStarsInput = document.getElementById('selectedStars');
  const starsPreview = document.getElementById('starsPreview');

  starOptions.forEach(star => {
    star.addEventListener('click', function() {
      starOptions.forEach(s => {
        s.style.transform = 'scale(1)';
        s.style.border = '3px solid transparent';
      });
      this.style.transform = 'scale(1.1)';
      this.style.border = '3px solid #4217f4';
      selectedStarValue = this.getAttribute('data-value');
      selectedStarsInput.value = selectedStarValue;
      starsPreview.textContent = selectedStarValue + '/5';
    });
  });

  const buttons = document.querySelectorAll('.next-btn');
  buttons.forEach(function(btn) {
    btn.addEventListener('click', function() {
      const currentStep = this.closest('.form-step');
      const currentStepId = currentStep.id.split('-')[1];
      const nextId = this.getAttribute('data-next');
      
      if (validateStep(currentStepId)) {
        const nextStep = document.getElementById('step-' + nextId);
        
        if (nextStep) {
          currentStep.style.display = 'none';
          nextStep.style.display = 'block';
        }
      }
    });
  });

  document.querySelectorAll('.form-input, .form-textarea').forEach(input => {
    input.addEventListener('input', function() {
      const errorId = this.name + '-error';
      const errorElement = document.getElementById(errorId);
      if (errorElement) {
        errorElement.style.display = 'none';
      }
    });
  });

  // Captcha
  const num1 = Math.floor(Math.random() * 10);
  const num2 = Math.floor(Math.random() * 10);
  const result = num1 + num2;
  document.getElementById('captcha-label').textContent = "Combien font " + num1 + " + " + num2 + " ?";

  // GESTION DE L'ENVOI - MODIFIÉ POUR ENVOYER TOUTES LES DONNÉES À N8N
  const form = document.getElementById('contactForm');
  form.addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const userAnswer = parseInt(document.getElementById('captcha-input').value);
    const captchaError = document.getElementById('captcha-error');
    
    if (userAnswer !== result) {
      captchaError.style.display = 'block';
      return;
    } else {
      captchaError.style.display = 'none';
    }

    try {
      // AFFICHER UNIQUEMENT "Vérification en cours"
      document.getElementById('successMessageBottom').style.display = 'block';
      document.getElementById('successMessageBottom').textContent = 'Vérification en cours...';

      // RÉCUPÉRER TOUTES LES DONNÉES DU FORMULAIRE
      const allFormData = getAllFormData();

      // 1. ENVOYER LE MAIL (Web3Forms)
      const emailResponse = await fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      });

      const emailResult = await emailResponse.json();

      // 2. ENVOYER TOUTES LES DONNÉES À N8N
      const n8nResponse = await fetch('https://n8n.c1euro.com/webhook/avis', {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify(allFormData)
      });

      const n8nResult = await n8nResponse.json();

      // RÉSULTAT
      if (emailResult.success) {
        // FERMER AUTOMATIQUEMENT LE PREMIER POPUP
        hideAvisPopup();
        
        // RÉINITIALISER LE FORMULAIRE
        form.reset();
        document.querySelectorAll('.form-step').forEach(step => {
          step.style.display = 'none';
        });
        document.getElementById('step-1').style.display = 'block';
        
        document.querySelectorAll('.error-message').forEach(error => {
          error.style.display = 'none';
        });

        // AFFICHER LE POPUP DE RÉSULTAT
        if (n8nResult.status === 'approved') {
          showPopup('approved');
        } else {
          showPopup('not_purchased');
        }

        // MASQUER LE MESSAGE DE VÉRIFICATION
        setTimeout(() => {
          document.getElementById('successMessageBottom').style.display = 'none';
        }, 1000);
      } else {
        alert('Une erreur est survenue, veuillez réessayer.');
        document.getElementById('successMessageBottom').style.display = 'none';
      }
    } catch (error) {
      console.error('Erreur lors de l\'envoi:', error);
      alert('Une erreur est survenue, veuillez réessayer.');
      document.getElementById('successMessageBottom').style.display = 'none';
    }
  });
});

// BOUTON D'OUVERTURE
document.addEventListener('DOMContentLoaded', function() {
  const openAvisBtn = document.getElementById('open-avis-btn');
  if (openAvisBtn) {
    openAvisBtn.style.cursor = 'pointer';
    openAvisBtn.addEventListener('click', showAvisPopup);
  }
});</script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism-autolinker.min.js"></script><script defer="defer" src="https://mimistok.com/media/plugins/syntaxHighlighter/prism-show-invisibles.min.js"></script></body></html>